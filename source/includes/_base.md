# 基本信息
## 基本信息
* 本篇列出接口的baseurl: **https://api.coincall.com**
* 所有接口的响应都是 JSON 格式。
* 所有时间、时间戳均为UNIX时间，单位为**毫秒**。

## 接口错误代码

* 每个接口都有可能抛出异常，异常响应格式如下：

```javascript
{
  "code": -40004,
  "msg": "Invalid symbol."
}
```


* 具体的错误码及其解释在[错误码汇总](#e08c1d4f9a)

## 接口的基本信息
 
* `GET` 方法的接口, 参数必须在 `query string`中发送。
* `POST` 方法的接口,参数可以在内容形式为`application/x-www-form-urlencoded`的 `query string` 中发送，也可以在 `request body` 中发送。 如果你喜欢，也可以混合这两种方式发送参数。
* 对参数的顺序不做要求。
* 但如果同一个参数名在`query string`和`request body`中都有，`query string`中的会被优先采用。
*  因为API系统是异步的, 所以返回的数据有延时很正常, 也在预期之中。

# 访问限制
## 访问限制基本信息

* **频率限制**
  
接口 | 频率 | 规则
-------------- | -------------- | -------------- 
获取配置信息 | 10次/2秒 | IP+业务线(期货/期权)
获取资金费率 | 10次/2秒 | IP纬度
获取仓位，订单信息 | 5次/1秒 | 用户纬度
获取订单历史，成交历史 | 4次/1秒 | 用户纬度
获取账户信息 | 2次/1秒 | 用户纬度
获取盘口信息 | 30次/2秒 | 用户纬度
下单 | 30次/2秒 | 用户纬度
撤单 | 30次/2秒 | 用户纬度

# 接口鉴权类型
* 每个接口都有自己的鉴权类型，鉴权类型决定了访问时应当进行何种鉴权。
* 鉴权类型会在本文档中各个接口名称旁声明，如果没有特殊声明即默认为 `NONE`。
* 如果需要 API-keys，应当在HTTP头中以 `X-CC-APIKEY`字段传递。
* API-keys 与 secret-keys **是大小写敏感的**。
* API-keys可以被配置为只拥有访问一些接口的权限。
 例如, 一个 API-key 仅可用于发送交易指令, 而另一个 API-key 则可访问除交易指令外的所有路径。
* 默认 API-keys 可访问所有鉴权路径.

鉴权类型 | 描述
------------ | ------------
NONE | 不需要鉴权的接口
SIGNED | 需要有效的API-KEY和签名

* `SIGNED`  接口是 签名(SIGNED)接口.

# 接口签名(SIGNED)
* 调用`SIGNED` 接口时，除了接口本身所需的参数外，还需要在`header`中传递 `sign`, 即签名参数。
* 签名使用`HMAC SHA256`算法. API-KEY所对应的API-Secret作为 `HMAC SHA256` 的密钥，其他所有参数作为`HMAC SHA256`的操作对象，得到的输出即为签名。
* `签名` **大小写不敏感**.

## 时间同步安全
* 签名接口均需要在header中传递 `ts`参数，其值应当是请求发送时刻的unix时间戳(毫秒)。
* 服务器收到请求时会判断请求中的时间戳，如果是5000毫秒之前发出的，则请求会被认为无效。这个时间空窗值可以通过发送可选参数 `X-REQ-TS-DIFF`来定义。
* 逻辑伪代码：

  ```javascript
  if (timestamp < (serverTime + 1000) && (serverTime - timestamp) <= X-REQ-TS-DIFF) {
    // process request
  } else {
    // reject request
  }
  ```

**关于交易时效性** 
互联网状况并不100%可靠，不可完全依赖,因此你的程序本地到CC服务器的时延会有抖动.
这是我们设置`X-REQ-TS-DIFF`的目的所在，如果你从事高频交易，对交易时效性有较高的要求，可以灵活设置`X-REQ-TS-DIFF`以达到你的要求。
**不推荐使用5秒以上的X-REQ-TS-DIFF**